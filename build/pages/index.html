<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<style>
    ul{
        list-style: none;
    }
    #j-button{
        margin-left: 40px;
    }
</style>
<body>
<ul>
    <li>courseId： <input id="j-courseId" type="text" value="381006"/></li>
    <li>lessonId： <input id="j-lessonId" type="text" value="1143244"/></li>
</ul>
<input id="j-button" type="button" value="打开app"/>
<p id="j-url">

</p>
<p id="j-platform">

</p>
</body>
<script src="../../bower_components/jquery/dist/jquery.js"></script>
<script>
    function getPlatform(){
        var testAndroid = /(android)/ig;
        var testIphone = /(iphone)/ig;
        var useragent = navigator.userAgent.toLowerCase();
        if(testAndroid.test(useragent)){
            return "android"
        }else if(testIphone.test(useragent)){
            return "iphone";
        }else{
            return "pc";
        }
    }
    function openApp(param){
        if(!param.courseId || !param.lessonId){
            alert("请输入信息");
            return;
        }
        var _frame = document.createElement("iframe");
        _frame.setAttribute("style", "width:200;height:200px");
        var url = '';
        var platform = getPlatform();
        if(platform == 'android'){
            url = 'yktaphone://open.lesson.ykt/'+param.courseId+'_'+param.lessonId;
        }else if(platform == 'iphone'){
            url = 'yktiphone://type=4-&-content='+param.courseId+'_'+param.lessonId;
        }else{
            $("#j-platform").text(platform);
            return;
        }
        _frame.src = url ;
        $("#j-url").text(url);
        $("#j-platform").text(platform);
        document.body.appendChild(_frame);
    }
    function doClick(){
        var param = {
            courseId: $("#j-courseId").val(),
            lessonId: $("#j-lessonId").val()
        };
        openApp(param);
    }
    $(document).ready(function(){
        $('#j-button').on('click',doClick);
    })

</script>
<script src="//localhost:35729/livereload.js"></script>
</html>